define("controller/dome",["zepto","pub","views/index","./stock","./myMenu","./search"],function(c,a,g,f,e,b){var d={init:function(h){d.create(h)},create:function(i){d.config={dome:null,noBorder:false,title:true,nav:false};i=i||{dome:body};c.extend(this.config,i);var h=this.config.dome;h.append(g);d.wapper=c("#Stock-Wapper");d.content=d.wapper.find(".stock-content");d.trans=d.wapper.find(".trans-dome");d.tab=d.wapper.find(".stock-tabs");d.searchContent=d.tab.eq(0);d.stockContent=d.tab.eq(1);d.elseContent=d.tab.eq(2);d.update();f.init(d);b.init(d);e.init(d);d.tab.each(function(j,k){var l=-j*110,m=-j*56;c(this).css3({transform:"translate3d(0px,0px, "+l+"px) rotateY("+m+"deg)"})});a.resize(d.resize)},update:function(){var j=d.wapper,i=j[0].offsetWidth,h=j[0].clientHeight;d.width=i;d.height=h;j.attr({"data-width":i,"data-height":h})},resize:function(){d.update();d.goTab(d.tabCurrent);e.resize(d);b.resize(d)},updateTab:function(){var k=d.width,i=d.trans,j=d.tab,l=parseInt(j.eq(0).css("margin-right")),h=j.length;i.width(k*h+l*h+999);j.width(k)},tabCurrent:1,goTab:function(i){d.updateTab();var l=d.width,h=d.height,j=d.trans,k=d.tab,n=parseInt(k.eq(0).css("margin-right")),m;m=-i*l-n*i;j.css3({transform:"translate3d("+m+"px,0,0)"});k.each(function(o,p){var q=((i-o)*110),r=((i-o)*56);c(this).css3({transform:"translate3d(0px,0px, "+q+"px) rotateY("+r+"deg)"})});if(i!=1){d.tabCurrent=i;return}if(d.tabCurrent==i){f.resize(d)}else{setTimeout(function(){f.resize(d)},550);d.tabCurrent=i}}};return d});