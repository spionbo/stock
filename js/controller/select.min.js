define(["views/select","./price","modules/stockData"],function(d,c,b){var a={init:function(e){a.parentElement=e.options;a.Dome=$(d);a.list=a.Dome.find("ul.cnt");a.parentElement.append(a.Dome);a.btnParentElemnt=c.element.canvasBox.elem;a.selector=$('<div class="add-stock">+自选</div>');a.selector.appendTo(a.btnParentElemnt);setTimeout(function(){a.selector.css({opacity:1})},1000);a.selector.click(function(g){g.stopPropagation();var f=$(this);f.css3({opacity:0,transform:"translate(100px,100px)"});setTimeout(function(){f.hide();a.add()},350);return false});a.get()},resize:function(){},set:function(e){T.set_stor("stockSelect",JSON.stringify(e))},get:function(){return JSON.parse(T.get_stor("stockSelect"))},del:function(){},add:function(){var h=b.type,f=b.Data.display,g=f.stockname,i=f.stocknum,j=false,e=a.get()||[];$.each(e,function(k,l){if(l.code==i){j=true}});if(j==false){e.push({name:g,code:i,type:h,pl:f.fluctuation,vl:f.lowPrice});a.set(e)}},update:function(){var g=a.list,f=a.get(),e="",h="";$.each(f,function(j,k){e+=k.code+","});$.ajax({url:"http://q.jrjimg.cn/?q=cn|s&n=objInt&c=code,name,np,hp,lp,hlp,pl,tm&i="+e,dataType:"jsonp",complete:function(){var i=objInt;$.each(i.HqData,function(n,s){var k=s[i.Column.code],j=s[i.Column.name],r=s[i.Column.hp],o=s[i.Column.lp],p=s[i.Column.np],q=s[i.Column.tm],l=s[i.Column.hlp],m=s[i.Column.pl];m=m==0?m+"%":m>0?'<span class="red">'+m+"%</span>":'<span class="green">'+m+"%</span>";q=(q/1000).toFixed(2)+"万手";h+="<ul><li>"+j+"</li><li>"+p+"</li><li>"+m+"</li><li>"+q+'</li><li><span class="add" data-index='+n+">-</span></li></ul>"});g.html(h);g.find(".add").unbind().bind("click",function(){var j=$(this).attr("data-index"),k=i.HqData[j];alert(k[0])})}})}};return a});