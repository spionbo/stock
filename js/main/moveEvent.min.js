define([],function(){var b={setPosition:function(c,d){if(!c||!d){return}T.set_stor(c,JSON.stringify(d))}},a=function(c,f,e){if(this instanceof a){this.parentElement=c;this.elem=f;this.key=e;var d=this;T.myAddListener(this.elem,"mousedown",function(g){d.downEvent.call(this,g,d)});T.myAddListener(this.elem,"mousemove",function(g){d.moveEvent.call(this,g,d)});T.myAddListener(this.elem,"mouseup",function(g){d.upEvent.call(this,g,d)})}else{return new a(c,f,e)}};a.prototype={downEvent:function(g,d){g=T.getEvent(g,0,1);if(this.setCapture){this.setCapture()}this.firstX=g.clientX;this.firstY=g.clientY;var i=d.parentElement.offset().left,f=d.parentElement.offset().top,c=this.firstX-d.elem.offset().left-i,h=this.firstY-d.elem.offset().top-f;this.left=(g.clientX-i)-c;this.top=(g.clientY-f)-h;this.moveX=0;this.moveY=0;this._move=true;this._ismove=false},moveEvent:function(k,d){if(!this._move){return}k=T.getEvent(k,0,1);var i=d.elem,l=k.clientX,j=k.clientY,g=32,c=d.parentElement.width()-g,f=d.parentElement.height()-g;this._ismove=true;this.moveX=l-this.firstX;this.moveY=j-this.firstY;this.endX=this.moveX+this.left;this.endY=this.moveY+this.top;if(this.endX<0){this.endX=0}else{if(this.endX>c){this.endX=c}}if(this.endY<0){this.endY=0}else{if(this.endY>f){this.endY=f}}i.css({left:this.endX+"px",top:this.endY+"px"})},upEvent:function(d,c){this._move=false;if(this.releaseCapture){this.releaseCapture()}if(this._ismove){this._ismove=false;b.setPosition(c.key,{left:this.endX,top:this.endY})}}};return a});