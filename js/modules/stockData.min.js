define(["pub"],function(a){var b={type:"s",keyword:"000001",Data:[],search:function(c,e,d){b.keyword=c||"000001";b.type=e||"s";b.getData(d)},getPrice:function(c){var d=Math.random()*(999)*1000;a.getScript("http://flashdata2.jrj.com.cn/today/js/index/"+b.keyword+".js?stockstarID="+d,function(){c(window["Min_"+b.keyword])})},getData:function(c){var f=Math.random()*(999)*1000;try{a.getScript("http://flashdata2.jrj.com.cn/today/js/mQuote/"+b.type+"/"+b.keyword+".js?stockstarID="+f,function(){b.format_date(Data,c)})}catch(d){require(["modules/data"],function(){b.format_date(Data,c)})}},format_date:function(f,g){var d=["timePlan","dailyK","weekK","monthK"],c=f.display;if(typeof c.timePlan!="string"){return g.call(b,f)}function e(h){$.each(d,function(k){var i=[],j=h[d[k]].split(";");$.each(j,function(m,l){i[m]=l.split(",")});h[d[k]]=i})}e(c);c.dailyK=c.dailyK.slice(20);c.weekK=c.weekK.slice(20);c.monthK=c.monthK.slice(20);b.Data=f;g&&g.call(b,f)},getName:function(){var c=M.getPara("type"),d=M.getPara("code");if(!c||c!="i"&&c!="IF"){c="s"}if(!c||!d){return}b.search(d,c)},getPara:function(f){var e=window.location.href;if(e.indexOf(f)!=-1){var c=e.indexOf(f)+f.length+1;var d=e.indexOf("&",c);if(d==-1){return e.substring(c)}else{return e.substring(c,d)}}else{return""}}};return b});